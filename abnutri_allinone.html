<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AB Nutri</title>
  <meta name="theme-color" content="#111111">
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fafafa; }
    header { background: #111; color: #fff; padding: 12px; text-align: center; }
    .container { padding: 16px; max-width: 960px; margin: auto; }
    .card { background: #fff; padding: 16px; margin-bottom: 16px; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,.1); }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { padding: 6px 8px; border-bottom: 1px solid #eee; font-size: 14px; }
    th { background: #f0f0f0; }
    button { padding: 8px 12px; border: none; border-radius: 8px; cursor: pointer; }
    button.primary { background: #111; color: #fff; }
    button.secondary { background: #eee; color: #111; }
    .pill { display:inline-block; padding:6px 10px; border-radius:20px; border:1px solid #ccc; margin:2px; cursor:pointer; }
    .pill.active { background:#111; color:#fff; }
    .totals { display:flex; flex-wrap:wrap; gap:8px; margin-top:8px; }
    .chip { background:#f0f0f0; padding:6px 10px; border-radius:12px; font-weight:bold; }
  </style>
</head>
<body>
<header><h1>AB Nutri</h1></header>
<div class="container">
  <div class="card">
    <label>Data</label>
    <input type="date" id="datePicker"><br><br>
    <label>Refeição</label>
    <div id="mealPills"></div>
  </div>
  <div class="card">
    <label>Buscar alimento</label>
    <input id="search"><br><br>
    <label>Alimento</label>
    <select id="foodSelect"></select><br><br>
    <label>Quantidade (g ou ml)</label>
    <input type="number" id="qty" value="100"><br><br>
    <button class="primary" id="addBtn">Adicionar</button>
  </div>
  <div class="card">
    <h3>Itens da refeição</h3>
    <table id="itemsTable">
      <thead><tr><th>Alimento</th><th>Qtd</th><th>Prot</th><th>Carb</th><th>Gord</th><th>Kcal</th><th></th></tr></thead>
      <tbody></tbody>
    </table>
  </div>
  <div class="card">
    <h3>Resumo do dia</h3>
    <div class="totals" id="dayTotals"></div>
  </div>
</div>

<script>
const MEALS = ["Café da manhã","Lanche da manhã","Almoço","Lanche da tarde","Pré-treino","Pós-treino","Jantar"];
const FOODS = [{"name": "Abacate", "protein": 1.2, "carbs": 6.0, "fat": 8.4, "kcal": 104.4}, {"name": "Abacaxi", "protein": 0.5, "carbs": 13.0, "fat": 0.1, "kcal": 54.9}, {"name": "Abóbora", "protein": 0.4, "carbs": 6.0, "fat": 0.8, "kcal": 32.800000000000004}, {"name": "Acem Bovino", "protein": 20.0, "carbs": 0.0, "fat": 15.0, "kcal": 215.0}, {"name": "Alcatra (Miolo)", "protein": 31.9, "carbs": 0.0, "fat": 11.6, "kcal": 232.0}, {"name": "Amendoim torrado", "protein": 23.68, "carbs": 21.51, "fat": 49.66, "kcal": 627.6999999999999}, {"name": "Arroz", "protein": 2.5, "carbs": 28.0, "fat": 0.3, "kcal": 124.7}, {"name": "Arroz Integral", "protein": 2.6, "carbs": 25.8, "fat": 1.0, "kcal": 122.60000000000001}, {"name": "Aveia em Flocos", "protein": 13.9, "carbs": 66.6, "fat": 0.0, "kcal": 322.0}, {"name": "Azeite", "protein": 0.0, "carbs": 0.0, "fat": 10.0, "kcal": 90.0}, {"name": "Banana Prata", "protein": 1.3, "carbs": 25.8, "fat": 0.3, "kcal": 111.10000000000001}, {"name": "Batata Asterix", "protein": 1.1, "carbs": 24.0, "fat": 0.2, "kcal": 102.2}, {"name": "Batata Inglesa", "protein": 2.0, "carbs": 17.0, "fat": 0.1, "kcal": 76.9}, {"name": "Batata Inglesa Frita", "protein": 3.4, "carbs": 41.0, "fat": 15.0, "kcal": 312.6}, {"name": "Batata Palha", "protein": 2.8, "carbs": 18.6, "fat": 24.0, "kcal": 301.6}, {"name": "Batom (Garoto)", "protein": 1.3, "carbs": 8.5, "fat": 5.4, "kcal": 87.80000000000001}, {"name": "Beterraba", "protein": 0.95, "carbs": 5.55, "fat": 0.05, "kcal": 26.45}, {"name": "Cacau 100%", "protein": 2.5, "carbs": 1.5, "fat": 2.0, "kcal": 34.0}, {"name": "Castanha", "protein": 7.25, "carbs": 7.55, "fat": 31.75, "kcal": 344.95}, {"name": "Cenoura", "protein": 0.4, "carbs": 3.35, "fat": 0.1, "kcal": 15.9}, {"name": "Cerveja Spaten", "protein": 1.5, "carbs": 11.0, "fat": 0.0, "kcal": 50.0}, {"name": "Chia", "protein": 8.6, "carbs": 22.0, "fat": 16.4, "kcal": 270.0}, {"name": "Chocolate ao Leite Nestle", "protein": 2.0, "carbs": 15.0, "fat": 7.5, "kcal": 135.5}, {"name": "Clara de Ovo", "protein": 11.0, "carbs": 0.7, "fat": 0.2, "kcal": 48.599999999999994}, {"name": "Coração de Frango", "protein": 26.4, "carbs": 0.1, "fat": 7.93, "kcal": 177.37}, {"name": "Creme de Leite", "protein": 0.0, "carbs": 1.93, "fat": 10.0, "kcal": 97.72}, {"name": "Cuzcuz(Amarelo)", "protein": 2.2, "carbs": 25.3, "fat": 0.7, "kcal": 116.3}, {"name": "Doce de Amendoim Gibi", "protein": 1.7, "carbs": 14.0, "fat": 3.5, "kcal": 94.3}, {"name": "Farelo de Aveia", "protein": 3.0, "carbs": 10.0, "fat": 1.5, "kcal": 65.5}, {"name": "Fatia de Pizza 4 Queijos", "protein": 12.0, "carbs": 34.0, "fat": 15.0, "kcal": 319.0}, {"name": "Feijão", "protein": 6.0, "carbs": 14.0, "fat": 0.5, "kcal": 84.5}, {"name": "Filé de Coxa e Sobrecoxa de Frango", "protein": 19.0, "carbs": 0.0, "fat": 13.0, "kcal": 193.0}, {"name": "Filé Mignon Bovino", "protein": 32.8, "carbs": 0.0, "fat": 8.8, "kcal": 210.39999999999998}, {"name": "Filé Mignon Suíno (Grelhado)", "protein": 32.8, "carbs": 0.0, "fat": 8.8, "kcal": 210.39999999999998}, {"name": "Hamburguer Maturatta de Picanha", "protein": 17.0, "carbs": 0.0, "fat": 20.0, "kcal": 248.0}, {"name": "Inhame", "protein": 1.49, "carbs": 27.58, "fat": 0.14, "kcal": 117.53999999999999}, {"name": "Iogurte Grego", "protein": 5.0, "carbs": 15.0, "fat": 4.0, "kcal": 116.0}, {"name": "Iogurte Zero", "protein": 4.0, "carbs": 6.0, "fat": 0.0, "kcal": 40.0}, {"name": "Laranja", "protein": 0.9, "carbs": 12.0, "fat": 0.1, "kcal": 52.5}, {"name": "Leite Condensado", "protein": 2.1, "carbs": 16.5, "fat": 2.4, "kcal": 96.0}, {"name": "Leite Desnatado", "protein": 7.0, "carbs": 10.0, "fat": 0.3, "kcal": 70.7}, {"name": "Leite em Pó", "protein": 6.8, "carbs": 10.0, "fat": 7.0, "kcal": 130.2}, {"name": "Leite Integral", "protein": 6.6, "carbs": 10.0, "fat": 6.0, "kcal": 120.4}, {"name": "Limão (Sumo)", "protein": 0.3, "carbs": 0.52, "fat": 0.0, "kcal": 3.2800000000000002}, {"name": "Linguiça Nabrasa (Pernil)", "protein": 6.0, "carbs": 0.0, "fat": 13.0, "kcal": 141.0}, {"name": "Lombo Suíno (Assado)", "protein": 27.8, "carbs": 0.0, "fat": 6.05, "kcal": 165.65}, {"name": "Maçã", "protein": 0.3, "carbs": 14.0, "fat": 0.2, "kcal": 59.0}, {"name": "Macarrão", "protein": 5.8, "carbs": 30.86, "fat": 0.93, "kcal": 155.01}, {"name": "Macarrão Instantâneo", "protein": 8.5, "carbs": 54.06, "fat": 13.18, "kcal": 368.86}, {"name": "Macarrão integral", "protein": 5.33, "carbs": 26.54, "fat": 0.54, "kcal": 132.34}, {"name": "Maionese Tradicional Hellmann's", "protein": 0.0, "carbs": 0.9, "fat": 4.0, "kcal": 39.6}, {"name": "Maracujá", "protein": 1.0, "carbs": 14.0, "fat": 0.6, "kcal": 65.4}, {"name": "Mel", "protein": 0.0, "carbs": 8.2, "fat": 0.0, "kcal": 32.8}, {"name": "Moéla de Frango", "protein": 30.38, "carbs": 0.0, "fat": 2.68, "kcal": 145.64}, {"name": "Morango", "protein": 0.7, "carbs": 7.7, "fat": 0.3, "kcal": 36.300000000000004}, {"name": "Nhoque", "protein": 4.88, "carbs": 34.01, "fat": 3.23, "kcal": 184.63}, {"name": "Ovos", "protein": 12.5, "carbs": 1.0, "fat": 10.0, "kcal": 144.0}, {"name": "Pão de Brioche (Plus Vita)", "protein": 4.0, "carbs": 26.0, "fat": 4.5, "kcal": 160.5}, {"name": "Pão de Forma", "protein": 5.0, "carbs": 25.0, "fat": 1.0, "kcal": 129.0}, {"name": "Pão de forma Integral", "protein": 4.3, "carbs": 22.0, "fat": 1.8, "kcal": 121.4}, {"name": "Pão francês", "protein": 4.5, "carbs": 25.0, "fat": 1.0, "kcal": 127.0}, {"name": "Pasta de Amendoim Power One", "protein": 4.0, "carbs": 3.0, "fat": 7.0, "kcal": 91.0}, {"name": "Patinho Bovino", "protein": 21.0, "carbs": 0.0, "fat": 9.0, "kcal": 165.0}, {"name": "Peito de Frango", "protein": 31.0, "carbs": 0.0, "fat": 3.6, "kcal": 156.4}, {"name": "Peito de Frango Empanado Lar", "protein": 20.0, "carbs": 14.0, "fat": 6.3, "kcal": 192.7}, {"name": "Peito de Peru(ave)", "protein": 29.3, "carbs": 0.0, "fat": 5.52, "kcal": 166.88}, {"name": "Presunto", "protein": 4.5, "carbs": 0.0, "fat": 0.98, "kcal": 26.82}, {"name": "Queijo Mussarela", "protein": 6.0, "carbs": 1.0, "fat": 7.0, "kcal": 91.0}, {"name": "Queijo Parmesão Ralado", "protein": 3.0, "carbs": 0.0, "fat": 3.5, "kcal": 43.5}, {"name": "Queijo Prato", "protein": 7.0, "carbs": 1.0, "fat": 10.0, "kcal": 122.0}, {"name": "Queijo Prato", "protein": 6.81, "carbs": 0.57, "fat": 8.73, "kcal": 108.09}, {"name": "Requeijão", "protein": 3.5, "carbs": 2.0, "fat": 9.0, "kcal": 103.0}, {"name": "Requeijão light godam", "protein": 3.0, "carbs": 1.0, "fat": 6.0, "kcal": 70.0}, {"name": "Ricota", "protein": 3.78, "carbs": 1.14, "fat": 2.43, "kcal": 41.55}, {"name": "Salsicha", "protein": 8.0, "carbs": 2.0, "fat": 9.0, "kcal": 121.0}, {"name": "Supremo de Frango Empanado", "protein": 15.0, "carbs": 16.0, "fat": 11.0, "kcal": 223.0}, {"name": "Tapioca", "protein": 0.0, "carbs": 56.0, "fat": 0.0, "kcal": 224.0}, {"name": "Tomate", "protein": 1.0, "carbs": 4.0, "fat": 0.2, "kcal": 21.8}, {"name": "Whey Protein Concentrado", "protein": 24.0, "carbs": 3.0, "fat": 2.0, "kcal": 126.0}];

let state = { date: new Date().toISOString().slice(0,10), meal: MEALS[0], data: JSON.parse(localStorage.getItem("nutri-data")||"{}") };

function save(){ localStorage.setItem("nutri-data", JSON.stringify(state.data)); }
function ensurePath(){ if(!state.data[state.date]) state.data[state.date] = {}; if(!state.data[state.date][state.meal]) state.data[state.date][state.meal]=[]; }

function renderMeals(){
  const el=document.getElementById("mealPills");
  el.innerHTML = MEALS.map(m=>"<span class='pill "+(m===state.meal?"active":"")+"' onclick='selectMeal(""+m+"")'>"+m+"</span>").join("");
}
function selectMeal(m){ state.meal=m; renderMeals(); renderTable(); }

function populateFoods(q=""){
  const sel=document.getElementById("foodSelect");
  const list = q? FOODS.filter(f=>f.name.toLowerCase().includes(q.toLowerCase())):FOODS;
  sel.innerHTML=list.map(f=>"<option>"+f.name+"</option>").join("");
}

function calc(f,qty){ let factor=qty/100; return { protein:(f.protein*factor).toFixed(1), carbs:(f.carbs*factor).toFixed(1), fat:(f.fat*factor).toFixed(1), kcal:(f.kcal*factor).toFixed(0) }; }

function addItem(){
  const name=document.getElementById("foodSelect").value; const qty=parseFloat(document.getElementById("qty").value)||0;
  if(!name||!qty) return;
  const f=FOODS.find(x=>x.name===name); if(!f) return;
  ensurePath();
  const vals=calc(f,qty);
  state.data[state.date][state.meal].push({name, qty, ...vals});
  save(); renderTable(); renderDayTotals();
}
function removeItem(i){ ensurePath(); state.data[state.date][state.meal].splice(i,1); save(); renderTable(); renderDayTotals(); }

function renderTable(){
  ensurePath();
  const rows=state.data[state.date][state.meal];
  const tb=document.querySelector("#itemsTable tbody");
  tb.innerHTML=rows.map((r,i)=>"<tr><td>"+r.name+"</td><td>"+r.qty+"</td><td>"+r.protein+"</td><td>"+r.carbs+"</td><td>"+r.fat+"</td><td>"+r.kcal+"</td><td><button class='secondary' onclick='removeItem("+i+")'>X</button></td></tr>").join("");
}

function renderDayTotals(){
  const day=state.data[state.date]||{}; let totals={protein:0,carbs:0,fat:0,kcal:0};
  for(const m of Object.keys(day)){ for(const it of day[m]){ totals.protein+=+it.protein; totals.carbs+=+it.carbs; totals.fat+=+it.fat; totals.kcal+=+it.kcal; } }
  document.getElementById("dayTotals").innerHTML = "<div class='chip'>Proteína: "+totals.protein.toFixed(1)+" g</div><div class='chip'>Carbo: "+totals.carbs.toFixed(1)+" g</div><div class='chip'>Gord: "+totals.fat.toFixed(1)+" g</div><div class='chip'>Kcal: "+totals.kcal.toFixed(0)+"</div>";
}

document.getElementById("datePicker").value=state.date;
document.getElementById("datePicker").addEventListener("change",e=>{state.date=e.target.value; renderTable(); renderDayTotals();});
document.getElementById("addBtn").addEventListener("click",addItem);
document.getElementById("search").addEventListener("input",e=>populateFoods(e.target.value));

renderMeals(); populateFoods(); renderTable(); renderDayTotals();
</script>
</body>
</html>